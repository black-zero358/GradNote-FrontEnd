# GradNote-FrontEnd 组件文档

## 1. 通用组件 (src/components/common)

### 1.1. ImageUploader

**功能描述**：图片上传组件，用于错题图片的上传，支持拖拽和点击上传。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| onUpload | Function | 是 | - | 上传成功回调函数 |
| disabled | boolean | 否 | false | 是否禁用上传 |
| acceptTypes | string[] | 否 | ['.jpg', '.jpeg', '.png', '.gif'] | 接受的文件类型 |
| maxSize | number | 否 | 5 | 最大文件大小(MB) |
| multiple | boolean | 否 | false | 是否支持多选 |

**使用示例**：
```jsx
import ImageUploader from '../components/common/ImageUploader';

const handleUpload = async (file) => {
  // 处理上传逻辑
  const formData = new FormData();
  formData.append('image', file);
  await uploadImage(formData);
};

<ImageUploader 
  onUpload={handleUpload}
  acceptTypes={['.jpg', '.jpeg', '.png']}
  maxSize={10}
  multiple={true}
/>
```

### 1.2. MathRenderer

**功能描述**：数学公式和Markdown渲染组件，支持LaTeX公式和Markdown语法的渲染。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| content | string | 是 | - | 要渲染的内容（包含Markdown和LaTeX） |
| options | Object | 否 | {} | ReactMarkdown渲染选项 |

**使用示例**：
```jsx
import MathRenderer from '../components/common/MathRenderer';

// 包含LaTeX公式的文本
const mathText = `
这是一个二次方程：$ax^2 + bx + c = 0$

其解为：
$$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$
`;

<MathRenderer content={mathText} />
```

### 1.3. LatexFormula

**功能描述**：LaTeX公式渲染组件，专门用于渲染数学公式，可以渲染行内公式或块级公式。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| formula | string | 是 | - | LaTeX公式 |
| block | boolean | 否 | false | 是否为块级公式 |
| options | Object | 否 | {} | KaTeX渲染选项 |

**使用示例**：
```jsx
import LatexFormula from '../components/common/LatexFormula';

// 行内公式
<LatexFormula formula="E = mc^2" />

// 块级公式
<LatexFormula formula="\sum_{i=1}^{n} i = \frac{n(n+1)}{2}" block={true} />
```

### 1.4. StepIndicator

**功能描述**：步骤指示器组件，用于显示流程步骤的状态，支持多种状态样式。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| status | string | 否 | 'pending' | 步骤状态 (pending, processing, success, failed, disabled) |
| label | string | 否 | '' | 步骤标签 |
| onClick | Function | 否 | - | 点击事件处理函数 |
| showLine | boolean | 否 | true | 是否显示连接线 |
| tooltipTitle | string | 否 | '' | 提示文本 |

**使用示例**：
```jsx
import StepIndicator, { STEP_STATUS } from '../components/common/StepIndicator';

<StepIndicator 
  status={STEP_STATUS.SUCCESS} 
  label="OCR识别" 
  onClick={() => handleStepClick('ocr')}
  tooltipTitle="光学字符识别" 
/>
```

## 2. 提交相关组件 (src/components/submission)

### 2.1. SubmissionRow

**功能描述**：提交行组件，显示单个错题的处理流程和状态，包含图片预览和各处理步骤的状态指示。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| rowNumber | number | 是 | - | 行号 |
| imageUrl | string | 否 | - | 图片URL (Blob URL) |
| data | Object | 否 | {} | 提交数据对象 |
| steps | Object | 否 | {...} | 步骤状态对象 |
| onStepClick | Function | 否 | - | 步骤点击回调 |
| onDetailsClick | Function | 否 | - | 详情按钮点击回调 |

**使用示例**：
```jsx
import SubmissionRow from '../components/submission/SubmissionRow';
import { STEP_STATUS } from '../components/common/StepIndicator';

<SubmissionRow
  rowNumber={1}
  imageUrl="blob:http://localhost:3000/12345"
  data={{
    ocr: { image_url: '/images/q1.jpg', text: '问题文本' }
  }}
  steps={{
    ocr: STEP_STATUS.SUCCESS,
    answer: STEP_STATUS.PROCESSING,
    knowledge: STEP_STATUS.PENDING,
    solving: STEP_STATUS.PENDING,
    knowledgeMarks: STEP_STATUS.PENDING
  }}
  onStepClick={(stepName, rowNumber) => {
    console.log(`Step ${stepName} clicked for row ${rowNumber}`);
  }}
  onDetailsClick={(rowNumber) => {
    console.log(`Details clicked for row ${rowNumber}`);
  }}
/>
```

## 3. 知识点相关组件 (src/components/knowledge)

### 3.1. KnowledgePointItem

**功能描述**：知识点条目组件，用于显示、编辑和管理知识点，支持确认和拒绝操作。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| knowledgePoint | Object | 是 | - | 知识点数据 |
| isConfirmed | boolean | 否 | - | 是否已确认 |
| isRejected | boolean | 否 | - | 是否已拒绝 |
| onConfirm | Function | 否 | - | 确认回调 |
| onReject | Function | 否 | - | 拒绝回调 |
| onCancelConfirm | Function | 否 | - | 取消确认回调 |
| onCancelReject | Function | 否 | - | 取消拒绝回调 |
| onEdit | Function | 否 | - | 编辑知识点回调 |
| readOnly | boolean | 否 | false | 是否只读模式 |

**使用示例**：
```jsx
import KnowledgePointItem from '../components/knowledge/KnowledgePointItem';

<KnowledgePointItem
  knowledgePoint={{
    id: 1,
    subject: '数学',
    chapter: '三角函数',
    section: '三角恒等式',
    item: '和差角公式',
    details: 'sin(α+β) = sinα·cosβ + cosα·sinβ'
  }}
  isConfirmed={false}
  isRejected={false}
  onConfirm={() => handleConfirm(1)}
  onReject={() => handleReject(1)}
  onEdit={(updatedKnowledgePoint) => handleEdit(updatedKnowledgePoint)}
/>
```

## 4. 仪表盘组件 (src/components/dashboard)

### 4.1. ChartBox

**功能描述**：图表容器组件，为各类统计图表提供统一的卡片式容器，支持标题、时间范围选择等功能。

**Props**：
| 名称 | 类型 | 是否必需 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| title | ReactNode\|string | 是 | - | 图表标题 |
| children | ReactNode | 是 | - | 子组件（图表） |
| loading | boolean | 否 | false | 加载状态 |
| onTimeRangeChange | Function | 否 | - | 时间范围变更处理函数 |
| timeRange | string | 否 | 'week' | 选中的时间范围 |
| extra | ReactNode | 否 | - | 额外的控件 |

**使用示例**：
```jsx
import ChartBox from '../components/dashboard/ChartBox';
import { LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid } from 'recharts';

const data = [
  { date: '2023-01-01', count: 5 },
  { date: '2023-01-02', count: 7 },
  { date: '2023-01-03', count: 3 },
];

<ChartBox
  title="每日错题数"
  loading={false}
  timeRange="week"
  onTimeRangeChange={(value) => setTimeRange(value)}
>
  <LineChart width={500} height={300} data={data}>
    <CartesianGrid strokeDasharray="3 3" />
    <XAxis dataKey="date" />
    <YAxis />
    <Tooltip />
    <Line type="monotone" dataKey="count" stroke="#8884d8" />
  </LineChart>
</ChartBox>
```
